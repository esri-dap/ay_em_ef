<!-- <ion-header>
  <ion-toolbar>
    <ion-title>
      Ionic Blank
    </ion-title>
  </ion-toolbar>
</ion-header> -->

<!-- <ion-list lines="none">
    <list-route>
    </list-route>
  </ion-list> -->

<ion-content>
  <div #mapViewNode></div>

  <ion-card class="card-main" id="card-main">

    <ion-card-header>

      <!-- <ion-card-subtitle>Card Subtitle</ion-card-subtitle> -->
      <ion-card-title>
        <ion-button shape="round" fill="outline" size="small" *ngIf="hasResult" (click)="resetStatus()">
          <ion-icon slot="icon-only" name="arrow-dropleft"></ion-icon>
        </ion-button>{{titleController}}
      </ion-card-title>
    </ion-card-header>

    <ion-card-content *ngIf="!hasResult">
      <input-with-icon-inside id="inputIcon" [type]="text" (ionChange)="queryStreet($event, 'origin')" [(ngModel)]="originInput" *ngIf="isSearchingAddress == 'origin' || !isSearchingAddress"
        (click)="cardActive()">
      </input-with-icon-inside>
      <br />
      <ion-list lines="none" *ngFor="let locationOrigin of listOriginLocationSuggestion">
        <list-address [addressName]="locationOrigin.text.split(',')[0]" [addressStreet]="locationOrigin.text" (click)="selectAddress(locationOrigin.magicKey, 'origin')">
        </list-address>
      </ion-list>
    </ion-card-content>

    <ion-card-content *ngIf="!hasResult">
      <destination-input-with-icon-inside id="inputIcon" [type]="text" (ionChange)="queryStreet($event, 'destination')" [(ngModel)]="destinationInput" *ngIf="isSearchingAddress !== 'origin'  || !isSearchingAddress"
        (click)="cardActive()">
      </destination-input-with-icon-inside>
      <br />
      <ion-list lines="none" *ngFor="let locationDestination of listDestinationLocationSuggestion">
        <list-address [addressName]="locationDestination.text.split(',')[0]" [addressStreet]="locationDestination.text"
          (click)="selectAddress(locationDestination.magicKey, 'destination')">
        </list-address>
      </ion-list>
    </ion-card-content>

    <ion-card-content *ngIf="!hasResult">
      <ion-item text-wrap>
        <ion-label position="stacked">Jam Keberangkatan (3 jam sekali)</ion-label>
        <br>
        <ion-datetime displayFormat="HH:mm" hourValues="0,3,6,9,12,15,18,21"  minuteValues="0" (ionChange)="queryTravelHour($event)" (click)="cardActive()"></ion-datetime>
      </ion-item>
    </ion-card-content> 

    <ion-card-content *ngIf="hasResult">
      <ion-img class="loading" [src]="'./../../assets/icon/loading.gif'" *ngIf="hasResult && !routeData"></ion-img>
      <ion-list *ngFor="let route of routeData; let i = index;">
        <list-route [conditionWeather]="weatherData[i]?.condition" [textWeather]="weatherData[i]?.text" [textRoute]="route.attributes.text">
        </list-route>
      </ion-list>
    </ion-card-content>

  </ion-card>
</ion-content>